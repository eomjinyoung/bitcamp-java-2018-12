<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ex04</title>
</head>
<body>
<h1>객체 - 객체 생성과 초기화 VI</h1>
<script>
"use strict"

// 함수를 생성자처럼 사용하기  
function createScore(name, kor, eng, math) {
	// 자바스크립트의 일반 함수를 생성자처럼 사용할 때는 
	// new 명령을 사용하여 외부에서 빈 객체를 생성한 후, 
	// 이 함수를 호출한다.
	// 외부에서 생성한 객체는 this를 통해 접근할 수 있다.
	// 만약 new 명령없이 이 함수를 호출한다면 this는 undefined 이다.
	console.log(this);
	
	// 주의! 
	// => 자바스크립트는 생성자를 만드는 별도의 문법이 없다!
	// => 단지 일반 함수를 이용하여 생성자로 사용할 뿐이다.
	//
	// 일반 함수를 생성자로서 사용한다는 의미?
	// => new 명령 다음에 즉시 호출하는 것을 의미한다.
	// => 예) new createScore();
	//
	// 생성자로서 함수를 호출한다면 빈 객체에 필수 변수와 함수를 추가시키는  
	// Object()라는 함수가 먼저 호출된다.
	// 꼭 자바에서 수퍼 클래스의 생성자를 호출하는 것과 같다!
	// this.Object();
	
    this.name = name;
    this.kor = kor;
    this.eng = eng;
    this.math = math;
    this.sum = function() { 
        return this.kor + this.eng + this.math
    };
    this.aver = function() { 
        return this.sum() / 3
    }
}

var scores = []; //new Array();
scores[0] = new createScore("홍길동", 100, 100, 100);
scores[1] = new createScore("임꺽정", 90, 90, 90);
scores[2] = new createScore("유관순", 80, 80, 80);

// 과목의 점수를 변경하더라도 합계와 평균은 다시 계산되기 때문에 편하다!
scores[2].kor = 100;

for (var score of scores) {
    console.log(score.name, score.kor, score.eng, score.math, 
    		score.sum(), score.aver());
}

console.log(scores[0]);
console.log(scores[1]);
console.log(scores[2]);
console.log(scores[0].toString());

// 생성자로 쓰이는 함수를 그냥 호출한다면?
var obj = createScore("오호라", 100, 100, 100);
// 객체 없이 createScore()를 호출하면 
// this 변수는 undefined 상태가 되어 내부에서 실행 오류가 발생할 것이다.
// 자바스크립트는 컴파일 방식이 아니기 때문에 
// new를 통해서만 createScore()를 호출하도록 강제할 방법이 없다.
// 대신에 개발자 사이에 암묵적으로 지키는 관례가 있다.
// 생성자로 쓰이는 함수는 이름을 대문자로 시작하게 짓는다.
// 그래서 다른 개발자가 바로 알아볼 수 있도록 한다.



</script>
</body>
</html>





